<!DOCTYPE html>
<!-- saved from url=(0058)https://help.github.com/articles/about-git-subtree-merges/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="search" type="application/opensearchdescription+xml" href="https://help.github.com/opensearch.xml" title="GitHub:Help">
  <title>
  
    
      About Git subtree merges - User Documentation
    
  
  </title>
  
<link rel="icon" type="image/x-icon" href="https://help.github.com/assets/images/site/favicon.ico">
<link rel="stylesheet" href="./About Git subtree merges - User Documentation_files/application.css">
<script type="text/javascript" async="" src="./About Git subtree merges - User Documentation_files/ga.js.download"></script><script src="./About Git subtree merges - User Documentation_files/application.js.download"></script>

<meta name="Description" content=" If you need to manage multiple projects within a single repository, you can use a subtree merge to handle all the references.  Typically, a subtree merge is used to contain a repository within a repos…">

<script type="text/javascript">
  $(function() {
    $('#quicksearch-query').lunrSearch({
      
      indexUrl: '/search/search.json',
      
      quickSearchResults:  '.autocomplete-results',
      quickSearchEntries:  '.result-group',
      quickSearchTemplate: '#quicksearch-results-template',

      searchResults: '.search-container',
      searchEntries: '.search-results',
      searchTemplate: '#search-results-template'
    });
  });
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3769691-27']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</head>

<body id="com" class="platform-switch platform-windows">

<div id="not-footer">
  


  <div id="header">
    <div class="clearfix">
      <h1 class="site-logo"><a href="https://help.github.com/">GitHub Help</a></h1>

      <ul class="top-nav">
        
<li>
  <button class="js-dropdown-button dropdown-button">Version <div class="dropdown-caret"></div></button>
  <div class="dropdown-menu js-dropdown-menu">
    <a href="https://help.github.com/">GitHub.com</a>
    
    <a href="https://help.github.com/enterprise/2.8/">GitHub Enterprise 2.8</a>
    
    <a href="https://help.github.com/enterprise/2.7/">GitHub Enterprise 2.7</a>
    
    <a href="https://help.github.com/enterprise/2.6/">GitHub Enterprise 2.6</a>
    
    <a href="https://help.github.com/enterprise/2.5/">GitHub Enterprise 2.5</a>
    
    <a href="https://help.github.com/enterprise/2.4/">GitHub Enterprise 2.4</a>
    
  </div>
</li>


        
        <li><a href="https://github.com/contact">Contact Support</a></li>
        <li><a href="https://github.com/">Return to GitHub</a></li>
        
      </ul>
    </div>
  </div>

  <div id="content-wrapper">

    <div class="site">
      










      <div class="content-header small">
        <h6 class="breadcrumbs">
          
          <a href="https://help.github.com/categories/advanced-git">Advanced Git</a>
          /
          
          About Git subtree merges
        </h6>
        <div class="search-form small right">
          
  


<script id="quicksearch-results-template" type="text/mustache">
  <div class="header">
    <a class="initial quicksearch-seemore" href="/search?q=">See more results</a>
  </div>
  [[#entries]]
    <tr class="article">
      <td class="info">
        <a href="[[url]]" class="js-articles-quicksearch-link">[[title]]</a>
      </td>
    </tr>
  [[/entries]]
</script>

<form accept-charset="UTF-8" action="https://help.github.com/search" id="articles-search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <div class="outer">
    <div class="inner fade-label">
      <input type="text" name="q" id="quicksearch-query" class="js-articles-quicksearch" placeholder="How can we help?">
      <div class="search-form-btn">
        <button><span class="octicon octicon-search"></span></button>
      </div>
    </div>
  </div>
</form>
<div class="autocomplete-results" style="display: none;">
  <table class="result-group" border="0" cellpadding="0" cellspacing="0">
  </table>
</div>

        </div>
      </div>

      <div class="article js-hide-during-search">

        <h2>About Git subtree merges</h2>

        <div id="article-platform-nav" style="display: block;">
  <ul>
    <li class="platform-mac">
      <a href="https://help.github.com/articles/about-git-subtree-merges/#platform-mac" data-platform="mac">
        mac
      </a>
    </li>
    <li class="platform-windows selected">
      <a href="https://help.github.com/articles/about-git-subtree-merges/#platform-windows" data-platform="windows">
        windows
      </a>
    </li>
    <li class="platform-linux">
      <a href="https://help.github.com/articles/about-git-subtree-merges/#platform-linux" data-platform="linux">
        linux
      </a>
    </li>
    <li class="platform-all hidden">
      <a href="https://help.github.com/articles/about-git-subtree-merges/#platform-all" data-platform="all">
        all
      </a>
    </li>
  </ul>
</div>


        <div class="article-body content-body wikistyle markdown-format">
          <div class="intro">

          

          </div>

          <div class="intro">

<p>If you need to manage multiple projects within a single repository, you can use a <em>subtree merge</em> to handle all the references.</p>

</div>

<p>Typically, a subtree merge is used to contain a repository within a repository. The "subrepository" is stored in a folder of the main repository.</p>

<p>The best way to explain subtree merges is to show by example. We will:</p>

<ul>
<li>Make an empty repository called <code>test</code> that represents our project</li>
<li>Merge another repository into it as a subtree called <code>Spoon-Knife</code>.</li>
<li>The <code>test</code> project will use that subproject as if it were part of the same repository.</li>
<li>Fetch updates from <code>Spoon-Knife</code> into our <code>test</code> project.</li>
</ul>

<h3>
<a id="setting-up-the-empty-repository-for-a-subtree-merge" class="anchor" href="https://help.github.com/articles/about-git-subtree-merges/#setting-up-the-empty-repository-for-a-subtree-merge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up the empty repository for a subtree merge</h3>

<ol>
<li><p>Open <span class="platform-mac">Terminal</span><span class="platform-linux">Terminal</span><span class="platform-windows">Git Bash</span>.</p></li>
<li>
<p>Create a new directory and navigate to it.</p>

<pre class="command-line"><span class="command">mkdir test</span>
<span class="command">cd test</span>
</pre>
</li>
<li>
<p>Initialize a new Git repository.</p>

<pre class="command-line"><span class="command">git init</span>
<span class="output">Initialized empty Git repository in /Users/octocat/tmp/test/.git/</span>
</pre>
</li>
<li>
<p>Create and commit a new file.</p>

<pre class="command-line"><span class="command">touch .gitignore</span>
<span class="command">git add .gitignore</span>
<span class="command">git commit -m "initial commit"</span>
<span class="output">[master (root-commit) 3146c2a] initial commit</span>
<span class="output"> 0 files changed, 0 insertions(+), 0 deletions(-)</span>
<span class="output"> create mode 100644 .gitignore</span>
</pre>
</li>
</ol>

<h3>
<a id="adding-a-new-repository-as-a-subtree" class="anchor" href="https://help.github.com/articles/about-git-subtree-merges/#adding-a-new-repository-as-a-subtree" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a new repository as a subtree</h3>

<ol>
<li>
<p>Add a new remote URL pointing to the separate project that we're interested in.</p>

<pre class="command-line"><span class="command">git remote add -f spoon-knife git@github.com:octocat/Spoon-Knife.git</span>
<span class="output">Updating spoon-knife</span>
<span class="output">warning: no common commits</span>
<span class="output">remote: Counting objects: 1732, done.</span>
<span class="output">remote: Compressing objects: 100% (750/750), done.</span>
<span class="output">remote: Total 1732 (delta 1086), reused 1558 (delta 967)</span>
<span class="output">Receiving objects: 100% (1732/1732), 528.19 KiB | 621 KiB/s, done.</span>
<span class="output">Resolving deltas: 100% (1086/1086), done.</span>
<span class="output">From git://github.com/octocat/Spoon-Knife</span>
<span class="output"> * [new branch]      master     -&gt; Spoon-Knife/master</span>
</pre>
</li>
<li>
<p>Merge the <code>Spoon-Knife</code> project into the local Git project. This doesn't change any of your files locally, but it does prepare Git for the next step.</p>

<pre class="command-line"><span class="command">git merge -s ours --no-commit --allow-unrelated-histories spoon-knife/master</span>
<span class="output">Automatic merge went well; stopped before committing as requested</span>
</pre>
</li>
<li>
<p>Create a new directory called <strong>spoon-knife</strong>, and copy the Git history of the <code>Spoon-Knife</code> project into it.</p>

<pre class="command-line"><span class="command">git read-tree --prefix=spoon-knife/ -u spoon-knife/master</span>
</pre>
</li>
<li>
<p>Commit the changes to keep them safe.</p>

<pre class="command-line"><span class="command">git commit -m "Subtree merged in spoon-knife"</span>
<span class="output">[master fe0ca25] Subtree merged in spoon-knife</span>
</pre>
</li>
</ol>

<p>Although we've only added one subproject, any number of subprojects can be incorporated into a Git repository.</p>

<div class="alert tip">

<p><strong>Tip</strong>: If you create a fresh clone of the repository in the future,  the remotes you've added will not be created for you. You will have to add them again using <a href="https://help.github.com/articles/adding-a-remote">the <code>git remote add</code> command</a>.</p>

</div>

<h3>
<a id="synchronizing-with-updates-and-changes" class="anchor" href="https://help.github.com/articles/about-git-subtree-merges/#synchronizing-with-updates-and-changes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Synchronizing with updates and changes</h3>

<p>When a subproject is added, it is not automatically kept in sync with the upstream changes. You will need to update the subproject with the following command:</p>

<pre class="command-line"><span class="command">git pull -s subtree <em>remotename</em> <em>branchname</em></span>
</pre>

<p>For the example above, this would be:</p>

<pre class="command-line"><span class="command">git pull -s subtree spoon-knife master</span>
</pre>

<h3>
<a id="further-reading" class="anchor" href="https://help.github.com/articles/about-git-subtree-merges/#further-reading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further reading</h3>

<ul>
<li><a href="https://git-scm.com/book/en/Git-Tools-Subtree-Merging">The "Subtree Merging" chapter from the <em>Pro Git</em> book</a></li>
<li>"<a href="https://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html">How to use the subtree merge strategy</a>"</li>
</ul>
        </div>

        <div class="support-footer">
          <ul class="article-footer button-nav">
            
              <li><a href="https://github.com/contact" class="minibutton">
                  <span class="octicon octicon-comment-discussion"></span>
                  Contact a human
                </a>
              </li>
            
          </ul>
        </div>
      </div>

      <div class="sidebar">
  <h3>Article versions</h3>
  <ul>
    <li><a href="https://help.github.com/articles/about-git-subtree-merges/#" skip-conversion="" data-proofer-ignore="">GitHub.com</a></li>

    
      <li class="">
        <a data-proofer-ignore="" href="https://help.github.com/enterprise/2.8/user/articles/about-git-subtree-merges/">GitHub Enterprise 2.8</a>
      </li>
    
      <li class="">
        <a data-proofer-ignore="" href="https://help.github.com/enterprise/2.7/user/articles/about-git-subtree-merges/">GitHub Enterprise 2.7</a>
      </li>
    
      <li class="">
        <a data-proofer-ignore="" href="https://help.github.com/enterprise/2.6/user/articles/about-git-subtree-merges/">GitHub Enterprise 2.6</a>
      </li>
    
      <li class="">
        <a data-proofer-ignore="" href="https://help.github.com/enterprise/2.5/user/articles/about-git-subtree-merges/">GitHub Enterprise 2.5</a>
      </li>
    
      <li class="">
        <a data-proofer-ignore="" href="https://help.github.com/enterprise/2.4/user/articles/about-git-subtree-merges/">GitHub Enterprise 2.4</a>
      </li>
    

  </ul>
</div>


      <div class="clear"></div>
    </div>
  </div>
</div>

<div id="footer">
  <div class="inner">
    <a href="https://github.com/" class="invertocat">
      <img alt="The GitHub Logo" src="./About Git subtree merges - User Documentation_files/invertocat.png" width="24" height="24">
    </a>
    <p class="left">
      © <span id="year">2017</span> GitHub Inc. All rights reserved.
    </p>
      <ul class="links right">
        <li><a href="https://help.github.com/terms-of-service">Terms of Service</a></li>
        <li><a href="https://help.github.com/privacy-policy">Privacy</a></li>
        
          <li><a href="https://help.github.com/security">Security</a></li>
        
        
          <li><a href="https://github.com/contact">Support</a></li>
        
      </ul>
  </div>
</div>


<div class="fullscreen-overlay"></div>


</body></html>