$(function(){var a,e;-1!==document.cookie.indexOf("user_id=")&&(a=$("a.js-notices-trigger"),e=$("ul.js-notices"),e.showNoMoreMessages=function(){return e.append($('<li class="js-messages-cleared"><p></p></li>')).find("p").addClass("text-center").text("You're all caught up. Huzzah! ")},$.ajax({url:"/notices",dataType:"json"}).done(function(s){var n,t,i,o,c,l,r;if($("ul.js-notices .js-loading").hide(),l="",i=0,t=s.messages,!(t.length>0))return e.showNoMoreMessages();for(n=o=0,c=t.length;c>=0?c>o:o>c;n=c>=0?++o:--o){switch(r="",t[n].date>s.last_read&&(r=" alert-info",++i),l+='<li class="notice-item media'+r+'">',l+='<div class="media-left">',t[n].category){case"news":l+='<span class="fa fa-fw fa-newspaper-o"></span> ';break;case"promo":l+='<span class="fa fa-fw fa-tags"></span> ';break;case"notification":l+='<span class="fa fa-fw fa-info-circle"></span> ';break;case"important":l+='<span class="fa fa-fw fa-exclamation-triangle"></span> '}l+='</div><div class="media-body"><p>'+t[n].note+"</p></div></li>",$("ul.js-notices").html(l)}i>0&&(a.find(".badge").text(i),$("a.js-notices-trigger").one("mouseenter",function(){return $.ajax({url:"/notices/read",type:"POST"}),a.find(".badge").fadeOut()}))}).fail(function(){$("ul.js-notices li.loading p").text("Could not retrieve notifications :(")}))});